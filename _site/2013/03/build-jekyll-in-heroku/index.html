
<!DOCTYPE html>
<html dir="ltr" lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="author" content="dieyushi">
        <meta name="keywords" content="dieyushi's Blog" />
        <meta name="description" content="dieyushi's Blog - dieyushi" />
        <link rel="stylesheet" type="text/css" media="all" href="/assets/themes/ilost/style.css" />
        <link rel="stylesheet" type="text/css" media="all" href="/assets/themes/ilost/pygments.css" />
        <link href="atom.xml" type="application/atom+xml" rel="alternate" title="dieyushi's Blog  &raquo; ATOM Feed">
        <title>heroku部署jekyll - dieyushi's Blog</title>
    </head>

    <body class="single single-format-standard">
        <header>
        <form role="search" method="get" id="searchform" action="http://www.google.com/search" >
            <div>
                <input type="text" value="" name="as_q" id="s" />
                <input type="hidden" name="sitesearch" value="http://www.zzsec.org" />
            </div>
        </form>
        <div class="hgroup">
            <h1><a href="/">dieyushi's Blog</a></h1>
            <span class="hidden">dieyushi</span>
            <a class="feedrss" href="/atom.xml">ATOM Rss</a>
        </div>
        <div class="menu">
            <ul>
                <li><a href="/" title="Home">Home</a></li>
                <li class="page_item"><a href="/archive.html">Archive</a></li>
                <li class="page_item"><a href="/categories.html">Categories</a></li>
                <li class="page_item"><a href="/tags.html">Tags</a></li>
            </ul>
        </div>
        </header>
        <hr/>
        <div id="content">
            
<article>
  <section class="post type-post status-publish format-standard hentry">
    <div class="title">
      <h2>heroku部署jekyll</h2>
      <small>
        <date class="date-pub" title="2013-03-21T00:00:00+08:00" datetime="2013-03-21T00:00:00+08:00" pubdate>
          <span class="month">March</span>
          <span class="day">21</span>
          <span class="year">2013</span>
        </date>, 
				
        
           
            <a href="/categories.html#life-ref" rel="category tag">life</a>
          
        
      </small>
    </div>
    <div class="entry">
      <h3>说明</h3>

<p>在heroku上部署jekyll站点通常的做法是搭建jekyll环境，在heroku上进行编译，或者是使用rack-jekyll.为了部署方便，我们采用了在服务器上不安装jekyll的情况下，将jekyll编译好的文件通过git传到heroku。</p>

<p><code>cat config.ru</code></p>
<div class="highlight"><pre><code class="ruby"><span class="nb">require</span> <span class="s1">&#39;rack/contrib/static_cache&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;rack/contrib/try_static&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;rack/contrib/not_found&#39;</span>

<span class="n">use</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:Deflater</span>

<span class="n">use</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:StaticCache</span><span class="p">,</span>
  <span class="ss">:urls</span> <span class="o">=&gt;</span> <span class="sx">%w[/assets /favicon.ico]</span><span class="p">,</span>
  <span class="ss">:root</span> <span class="o">=&gt;</span> <span class="s2">&quot;_site&quot;</span>

<span class="n">use</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:TryStatic</span><span class="p">,</span>
  <span class="ss">:urls</span> <span class="o">=&gt;</span> <span class="sx">%w[/]</span><span class="p">,</span>
  <span class="ss">:root</span> <span class="o">=&gt;</span> <span class="s2">&quot;_site&quot;</span><span class="p">,</span>
  <span class="ss">:try</span>  <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span> <span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="s1">&#39;/index.html&#39;</span><span class="o">]</span>

<span class="n">run</span> <span class="ss">Rack</span><span class="p">:</span><span class="ss">:NotFound</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;_site/404.html&#39;</span><span class="p">)</span>
</code></pre></div>
<!--more-->

<p><code>cat Gemfile</code></p>
<div class="highlight"><pre><code class="ini"><span class="err">source</span> <span class="err">&quot;https://rubygems.org&quot;</span>

<span class="err">gem</span> <span class="err">&quot;rack-contrib&quot;,</span> <span class="err">&quot;~&gt;</span> <span class="err">1.1.0&quot;</span>
<span class="err">gem</span> <span class="err">&quot;puma&quot;,</span> <span class="err">&quot;~&gt;</span> <span class="err">1.6.3&quot;</span>
</code></pre></div>
<p><code>Gemfile.lock</code>可以由<code>bundle install</code>生成</p>

<p><code>cat Procfile</code></p>
<div class="highlight"><pre><code class="text">web:     bundle exec puma -p $PORT config.ru
</code></pre></div>
<p>建立子目录<code>_site</code>，在<code>_config.yaml</code>中设置<code>destination:./.site/_site</code>，每次通过jekyll生成的文件放到这个目录中，然后在<code>./site</code>中可以通过git传到heroku。</p>

    </div>
    <div class="post-meta">
      标签：
      
      


    
    
      
      <a href="/tags.html#blog-ref" class="tag-link" style="font-size: 11pt;">blog</a>
    
      
      <a href="/tags.html#config-ref" class="tag-link" style="font-size: 11pt;">config</a>
    
  




      <div class="clear"></div>
    </div>
    <nav class="post-nav">
      
      <span class="previous"><a href="/2013/03/new-blog" rel="prev" title="New Blog">New Blog</a></span>
      
      
      <span class="next"><a href="/2013/03/install-nginx-in-openshift" rel="next" title="Install Nginx in OpenShift">Install Nginx in OpenShift</a></span>
      
      <div class="clear"></div>
    </nav>
  </section>
  <div class="comment">
  


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'zzsec'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





  </div>
  <div class="sharing">
  

  
        <!-- JiaThis Button BEGIN -->
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	siteNum:14,
	sm:"twitter,googleplus,fb,gmail,evernote,readitlater,print,email,tsina,tqq,renren,douban,weixin,ydnote",
	summary:"",
	showClose:true,
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;uid=1334747872812250" charset="utf-8"></script>
<!-- JiaThis Button END -->

  



  </div>
</article>


            <aside>
            <ul id="side" class="clear">
                <li id="links-2" class="widget widget_links"><h3 class="widgettitle">About Me</h3>
                <ul class='xoxo blogroll'>
                    <li><a href="mailto:zz@zzsec.org" target="_blank" rel="me">Gtalk</a></li>
                    <li><a href="https://twitter.com/zzscu" target="_blank" rel="me">Twitter</a></li>
                    <li><a href="https://github.com/dieyushi/" target="_blank" rel="me">GitHub</a></li>
                    <li><a href="https://plus.google.com/108491501040349109978" target="_blank" rel="me">Google+</a></li>
                </ul>
                </li>
                <li id="tagcloud-2" class="widget">
                <h3 class="widgettitle">Tag Cloud</h3>
                <div class="post-meta">
                    
                    


    
    
      
      <a href="/tags.html#blog-ref" class="tag-link" style="font-size: 11pt;">blog</a>
    
      
      <a href="/tags.html#config-ref" class="tag-link" style="font-size: 11pt;">config</a>
    
      
      <a href="/tags.html#websecurity-ref" class="tag-link" style="font-size: 9pt;">websecurity</a>
    
      
      <a href="/tags.html#xss-ref" class="tag-link" style="font-size: 9pt;">xss</a>
    
      
      <a href="/tags.html#archlinux-ref" class="tag-link" style="font-size: 9pt;">archlinux</a>
    
      
      <a href="/tags.html#python-ref" class="tag-link" style="font-size: 9pt;">python</a>
    
      
      <a href="/tags.html#google-ref" class="tag-link" style="font-size: 9pt;">google</a>
    
      
      <a href="/tags.html#kindle-ref" class="tag-link" style="font-size: 9pt;">kindle</a>
    
  




                </div>
                </li>
                <li id="recent-posts-2" class="widget widget_recent_entries">
                <h3 class="widgettitle">Recent Posts</h3>
                <ul>
                    
                    <li><a href="/2013/04/kindle" title="kindle的那些事">kindle的那些事</a></li>
                    
                    <li><a href="/2013/04/google-account-automatic-registration" title="google注册过程分析">google注册过程分析</a></li>
                    
                    <li><a href="/2013/03/clean-pacman-cache" title="Pacman缓存清理">Pacman缓存清理</a></li>
                    
                    <li><a href="/2013/03/something-about-httponly" title="HttpOnly的那些事">HttpOnly的那些事</a></li>
                    
                    <li><a href="/2013/03/install-nginx-in-openshift" title="Install Nginx in OpenShift">Install Nginx in OpenShift</a></li>
                    
                    <li><a href="/2013/03/build-jekyll-in-heroku" title="heroku部署jekyll">heroku部署jekyll</a></li>
                    
                    <li><a href="/2013/03/new-blog" title="New Blog">New Blog</a></li>
                    
                </ul>
                </li>
                <li id="recent-comments-2" class="widget widget_recent_comments">
                <h3 class="widgettitle">Recent Comments</h3>
                <script type="text/javascript" src="http://zzsec.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=50"></script>
                </li>
            </ul>
            </aside>
            <div class="clear"></div>
        </div>
        <hr/>
        <footer>
        <div>
            <p class="line">
            <span class="alignright">
                <a href="/" title="dieyushi's Blog">首页</a> &brvbar; <a href="/atom.xml">RSS 订阅</a> &brvbar; <a href="/sitemap.txt">Sitemap</a>
            </span>
            iLost theme  &brvbar; Designed by <a href="http://xuui.net/">Xu.hel</a> in ChengDu. Forked by <a href="http://www.zzsec.org/">zzsec</a>.
            </p>
            <p><span class="alignright">Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a></span>&copy; 版权所有 2011-2013 <a href="http://www.zzsec.org" title="dieyushi's Blog" rel="home">dieyushi's Blog</a></p>
        </div>
        </footer>
        


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39425016-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



    </body>
</html>

